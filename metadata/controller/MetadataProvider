{
    "type": "class",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "MetadataProvider",
        "singleton": true,
        "extend": "Ext.util.Observable"
    },
    "designerId": "b3becc8c-fe30-482c-a7a6-6ecd8b708311",
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "load",
                "designer|params": [
                    "pos",
                    "locale",
                    "cb"
                ],
                "implHandler": [
                    "var mdStore = Ext.getStore(\"metadataStore\");",
                    "",
                    "mdStore.load({",
                    "    params: {",
                    "        poList: pos.join(),",
                    "        locale: locale",
                    "    },",
                    "    callback: function (records, operation, success) {",
                    "        Partner.controller.MetadataProvider.fireEvent('change');",
                    "        ",
                    "        cb();",
                    "    }",
                    "});"
                ]
            },
            "designerId": "94163354-61c5-44f0-99fe-b548979bda2f"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getLabel",
                "designer|params": [
                    "poName",
                    "propertyName",
                    "locale"
                ],
                "implHandler": [
                    "var mdStore = Ext.getStore(\"metadataStore\");",
                    "",
                    "// PO nachladen falls nicht vorhanden",
                    "if (mdStore.find('name', poName) !== 1) {",
                    "    //Partner.controller.MetadataProvider.load([poName], locale);",
                    "}",
                    "",
                    "// PO finden",
                    "var po = mdStore.findRecord('name', poName);",
                    "",
                    "if (!po) {",
                    "    console.log(poName + ' not found in MetadataProvider');",
                    "    return \"[PO NOT FOUND]\";",
                    "}",
                    "",
                    "// Property holen",
                    "var properties = po.properties();",
                    "",
                    "var property = properties.findRecord('name', propertyName);",
                    "",
                    "if (!property) {",
                    "    console.log('Property ' + propertyName + ' not found in PO ' + poName + ' MetadataProvider');",
                    "    return \"[Property not found]\";",
                    "}",
                    "",
                    "// Texte holen",
                    "var texts = property.propertyTexts();",
                    "",
                    "var text = texts.findRecord('tag', 'label');",
                    "",
                    "return text.get('text');"
                ]
            },
            "designerId": "6c24621a-828e-41d8-8346-37aff70693c4"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "constructor",
                "designer|params": [
                    "params"
                ],
                "implHandler": [
                    "this.addEvents({",
                    "    \"change\" : true",
                    "});",
                    "",
                    "this.callParent(arguments);"
                ]
            },
            "designerId": "df32f116-b57d-4166-b290-bd15c2f76856"
        }
    ]
}